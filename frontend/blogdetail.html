<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Loading blog...</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet" />

    <!-- Font Awesome CDN -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />

    <!-- CSS file -->
    <link rel="stylesheet" href="style.css" />


  </head>

  <body>

    <nav role="navigation" aria-label="Main navigation">
      <!-- logo with text -->
      <div class="logo" tabindex="0">
        <img src="noedgeLOGO.png" alt="" />
        <!-- <span>Nexus</span> -->
        <div class="frosted-overlay"></div>
      </div>

      <!-- hamburger -->
      <button class="hamburger" aria-label="Toggle menu" aria-expanded="false" aria-controls="primary-menu"
        id="hamburger-btn">
        <span></span>
        <span></span>
        <span></span>
      </button>
      <!-- menu list -->
      <ul class="menu" id="primary-menu" aria-hidden="true">
        <li><a href="#" tabindex="-1">Home</a></li>
        <li><a href="#Services" tabindex="-1">Services</a></li>
        <li><a href="#About" tabindex="-1">About</a></li>
        <li><a href="#OurBlog" tabindex="-1">Blogs</a></li>
        <li><a href="#contact" tabindex="-1">Contact</a></li>
      </ul>
    </nav>

    <div id="overlay" tabindex="-1"></div>

    <!-- This is where I want the blog content to go -->
    <main id="blog-detail" class="blog-detail"></main>

    <!-- footer section -->
    <footer class="site-footer">
      <div class="footer-container">
        <div class="footer-left">
          <h2>Subscribe to Our Newsletter</h2>
          <p>Stay up to date with our latest news and offers. No spam, ever.</p>
          <form class="newsletter-form">
            <input type="email" placeholder="Enter your email" required />
            <button type="submit" class="btn">Subscribe</button>
          </form>
        </div>
        <div class="footer-right">
          <h3>Contact Us</h3>
          <p>Email: <a href="mailto:support@example.com">ffchen.ca@gmail.com</a></p>
          <div class="social-icons">
            <a href="#" aria-label="Facebook"><i class="fab fa-facebook-f"></i></a>
            <a href="#" aria-label="Twitter"><i class="fab fa-twitter"></i></a>
            <a href="#" aria-label="Instagram"><i class="fab fa-instagram"></i></a>
            <a href="#" aria-label="LinkedIn"><i class="fab fa-linkedin-in"></i></a>
          </div>

        </div>
      </div>
      <div class="footer-bottom">
        <p>&copy; 2025 Nexus Studio. All rights reserved.</p>
      </div>
    </footer>

    <!-- Bottom stick bar  -->
    <div class="bottom-bar" role="contentinfo">
      <div class="info"> Need help? Not ready to start yet?
        <strong> Book a Free Consultation â†’ </strong><button class="btn cta-button">Book Now</button>
      </div>
    </div>



    <script>
      const params = new URLSearchParams(window.location.search);
      const docId = params.get('doc');

      if (!docId) {
        document.body.innerHTML = "<p>Blog not found.</p>";
      } else {
        fetch(`https://intuitive-excitement-a83f64758d.strapiapp.com/api/blogs?filters[documentId][$eq]=${docId}&populate=*`)
          .then(res => res.json())
          .then(data => {
            const blog = data.data[0];
            if (blog) {
              renderBlog(blog);
            } else {
              document.body.innerHTML = "<p>Blog not found.</p>";
            }
          })
          .catch(err => {
            console.error("Failed to load blog:", err);
            document.body.innerHTML = "<p>Error loading blog.</p>";
          });
      }



      // Function to render the blog content
      /**
       * Renders the blog content in the specified container.
       * @param {Object} blog - The blog object containing the details to display.
       */

      function renderBlog(blog) {
        document.title = blog.Title;

        const container = document.getElementById("blog-detail");
        container.innerHTML = ""; // Clear previous content if any

        const title = document.createElement("h1");
        title.textContent = blog.Title;

        const img = document.createElement("img");
        img.src = blog.image?.url || "";
        img.alt = blog.Title;

        const content = document.createElement("div");
        blog.description.forEach(para => {
          const p = document.createElement("p");
          p.textContent = para.children.map(child => child.text).join("");
          content.appendChild(p);
        });

        container.append(title, img, content);
      }

    </script>

  </body>

</html>